<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Urbanist:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <title>Métricas - Aura</title>
  <link rel="icon" type="image/x-icon" href="img/logo-janela.png">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Custom font similar to original */
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@600&family=Roboto&display=swap');

    :root {
      --green-bg: #758352;
      /* Sidebar background */
      --green-border: #7d9466;
      /* Sidebar border */
      --bg-main: #f6f2ed;
      /* Main background */
      --text-dark: #4a2f19;
      /* Dark brown text */
      --text-light: #5d4a3d;
      /* Medium brown text */
      --box-bg: #ffffff;
      /* White squares background */
      --box-light-bg: #f0f0ef;
      --btn-bg: #d9c8b9;
      /* Add button background */
      --btn-hover-bg: #c7b19a;
      --input-bg: #fff;
      --icon-color: #4a2f19;
    }

    body,
    html {
      background-color: #f9f5f0;
      color: #4b3721;
      margin: 0;
      padding: 0;
      height: 100%;
      background-color: var(--bg-main);
      font-family: 'Urbanist', sans-serif;
      color: var(--text-dark);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      user-select: none;
    }

    /* Scrollbar style for graph container */
    .graph-container::-webkit-scrollbar {
      height: 8px;
    }

    .graph-container::-webkit-scrollbar-thumb {
      background-color: #a2b577;
      border-radius: 4px;
    }

    /* Vertical dashed line dividing main columns */
    .divider {
      border-right: 2px dashed #a6a58f;
    }

    /* Cards styles */
    .card {
      background-color: #fffdfa;
      border-radius: 1rem;
      box-shadow: 0 6px 8px rgb(0 0 0 / 0.06);
    }

    .card-image-placeholder {
      background-color: #d7d9c1;
      border-radius: 0.5rem;
      width: 64px;
      height: 64px;
      flex-shrink: 0;
    }

    /* Container full screen with border radius and border */
    .app-container {
      width: 100vw;
      height: 100vh;
      display: flex;
      background: var(--bg-main);
      border-radius: 0;
      overflow: hidden;
      overflow-y: auto;  
      box-sizing: border-box;
    }

    /* Sidebar styles */
    .sidebar {
      background-color: #73804F;
      width: 100px;
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px 0;
      border-top-right-radius: 25px;
      border-bottom-right-radius: 25px;
      position: fixed;
      left: 0;
      top: 0;
      z-index: 10;
    }

    .sidebar a {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 48px;
      height: 48px;
      margin: 10px 0;
      background-color: transparent;
      border-radius: 12px;
      cursor: pointer;
    }

    .sidebar img {
      width: 68px;
      height: 28px;
    }

    .sidebar .icons {
      margin-top: 130%;
    }

    .spacer {
      flex: 1;
    }

    /* Main content area */
    .main-content {
      margin-left: 100px;
      /* Same as sidebar width */
      flex: 1;
      padding: 2rem;
      position: relative;
      min-height: 100vh;
      width: calc(100% - 100px);
      box-sizing: border-box;
    }

    /*Configuração*/
    .settings-btn {
      position: absolute;
      top: 32px;
      right: 48px;
      width: 32px;
      height: 32px;
      border: none;
      background: transparent;
      cursor: pointer;
      color: var(--text-dark);
      opacity: 0.7;
      transition: opacity 0.3s ease;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 20;
    }

    .settings-btn:hover {
      opacity: 1;
    }

    /* Buttons for period selector */
    .period-btn {
      font-weight: 700;
      font-family: 'Fredoka One', cursive;
      background-color: transparent;
      border-radius: 9999px;
      padding: 0.25rem 0.75rem;
      transition: background-color 0.3s ease;
      border: 1.5px solid transparent;
      cursor: pointer;
    }

    .period-btn-active {
      background-color: #a2b577;
      border-color: #a2b577;
      color: #fffdfa;
    }

    .period-btn:not(.period-btn-active):hover {
      background-color: #c1d19b;
      border-color: #c1d19b;
      color: #4b3721;
    }

    /* Tooltip style for graph */
    .tooltip {
      position: absolute;
      background-color: #a2b577;
      color: #fffdfa;
      font-weight: 700;
      font-size: 0.8rem;
      padding: 4px 8px;
      border-radius: 0.5rem;
      pointer-events: none;
      user-select: none;
      white-space: nowrap;
      transform: translate(-50%, -110%);
      opacity: 0;
      transition: opacity 0.15s ease;
      z-index: 10;
    }

    /* Responsive adjustments */
    @media (max-width: 1024px) {
      .main-content {
        padding: 1.5rem;
      }

      .divider {
        border-right: none;
        padding-right: 0;
      }

      .flex-row {
        flex-direction: column;
      }

      .w-1\/2 {
        width: 100%;
      }

      .pl-10,
      .pr-10 {
        padding-left: 0;
        padding-right: 0;
      }
    }
  </style>
</head>

<body class="bg-[#F9F7F3] font-sans text-[#4B3A2B]">
  <div class="app-container">
    <!-- Sidebar -->
    <nav class="sidebar">
      <a href="#"><img src="img/Logo.png" alt="Logo" style="margin-top: 30%;"></a>
      <div class="icons">
        <a href="home.html"><img src="img/icons-menu/home.png" alt="Home"
            style="margin-bottom: 190%; width: 35px; height: 25px;"></a>
        <a href="banco.html"><img src="img/icons-menu/banco.png" alt="Banco de Psicólogos"
            style="margin-bottom: 60%; width: 40px; height: 40px;"></a>
        <a href="metricas.html"><img src="img/icons-menu/metricas.png" alt="Métricas"
            style="width: 35px; height: 25px; margin-top:50%"></a>
        <a href="comunidade.html"><img src="img/icons-menu/comunidade.png" alt="Comunidade"
            style="width: 38px; margin-top: 160%;"></a>
      </div>
      <div class="spacer"></div>
      <a href="login.html"><img src="img/icons-menu/sair.png" alt="Sair" style="width: 49px; height: 49px;"></a>
    </nav>

    <!-- Main Content -->
    <div class="main-content">
      <!-- Botão de Configurações no canto superior direito -->
      <button id="settingsBtn" class="settings-btn" aria-label="Configurações" title="Configurações">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round" width="24" height="24" viewBox="0 0 24 24">
          <circle cx="12" cy="12" r="3"></circle>
          <path
            d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z">
          </path>
        </svg>
      </button>

      <header class="flex justify-between items-center mb-10">
        <h1 class="text-3xl font-bold">Métricas</h1>
      </header>

      <section class="flex flex-row gap-16 h-full min-h-[440px]">
        <!-- Left Column -->
        <div class="flex flex-col w-1/2 divider pr-10" style="border-color: #a6a58f;">
          <!-- Emotional State Summary -->
          <article>
            <h2 class="font-semibold mb-4 text-lg" style="color:#4b3721;">Resumo do estado emocional</h2>
            <div class="card p-6 rounded-xl mb-8 relative"
              style="background-color:#fffdfa; box-shadow: 0 6px 8px rgba(0,0,0,0.06);">
              <div class="flex justify-center mb-3">
                <select id="period-select" aria-label="Selecionar período"
                  class="text-xs text-[#5c5b48] font-bold bg-[#EAEAE1] rounded-full px-3 py-1 w-fit cursor-pointer drop-shadow-sm">
                  <option value="1d">1 dia</option>
                  <option value="1w">1 semana</option>
                  <option value="15d" selected>15 dias</option>
                  <option value="1m">1 mês</option>
                </select>
              </div>
              <div class="graph-container relative"
                style="width:100%; height:180px; overflow-x:auto; user-select:none;">
                <svg id="emotional-graph" width="800" height="180" viewBox="0 0 800 180" fill="none"
                  xmlns="http://www.w3.org/2000/svg" style="display:block; margin:auto;">
                  <defs>
                    <linearGradient id="grad" x1="0" y1="0" x2="0" y2="1">
                      <stop offset="0%" stop-color="#a2b577" stop-opacity="0.3" />
                      <stop offset="80%" stop-color="#a2b577" stop-opacity="0" />
                    </linearGradient>
                  </defs>
                  <!-- Horizontal grid lines -->
                  <line x1="40" y1="160" x2="760" y2="160" stroke="#dadada" stroke-width="1" />
                  <line x1="40" y1="120" x2="760" y2="120" stroke="#dadada" stroke-width="1" />
                  <line x1="40" y1="80" x2="760" y2="80" stroke="#dadada" stroke-width="1" />
                  <line x1="40" y1="40" x2="760" y2="40" stroke="#dadada" stroke-width="1" />

                  <!-- Axis -->
                  <line x1="40" y1="20" x2="40" y2="160" stroke="#dadada" stroke-width="1" />
                  <line x1="760" y1="160" x2="40" y2="160" stroke="#dadada" stroke-width="1" />

                  <!-- Graph path with fill -->
                  <path id="graph-fill"
                    d="M40 160 L40 140 C60 100 100 110 140 110 C180 110 180 70 220 70 C260 70 300 150 340 80 C380 10 420 10 460 80 C500 150 540 60 580 120 C620 180 660 25 700 90 C740 140 760 140 760 160 L40 160 Z"
                    fill="url(#grad)" stroke="none" />
                  <path id="graph-line"
                    d="M40 140 C60 100 100 110 140 110 C180 110 180 70 220 70 C260 70 300 150 340 80 C380 10 420 10 460 80 C500 150 540 60 580 120 C620 180 660 25 700 90 C740 140 760 140"
                    stroke="#a2b577" stroke-width="3" fill="none" stroke-linejoin="round" />
                  <!-- Data points -->
                  <circle cx="60" cy="100" r="6" fill="#a2b577" />
                  <circle cx="140" cy="110" r="6" fill="#a2b577" />
                  <circle cx="220" cy="70" r="6" fill="#a2b577" />
                  <circle cx="300" cy="150" r="6" fill="#a2b577" />
                  <circle cx="460" cy="80" r="6" fill="#a2b577" />
                  <circle cx="540" cy="60" r="6" fill="#a2b577" />
                  <circle cx="580" cy="120" r="6" fill="#a2b577" />
                  <circle cx="620" cy="180" r="6" fill="#a2b577" />
                  <circle cx="700" cy="90" r="6" fill="#a2b577" />
                  <circle cx="740" cy="140" r="6" fill="#a2b577" />
                </svg>

                <span id="tooltip" class="tooltip"></span>
              </div>
            </div>
          </article>

          <!-- Activities Completed and Goals -->
          <article>
            <h2 class="font-semibold mb-4 text-lg" style="color:#4b3721;">Atividades realizadas e metas</h2>
            <div class="flex flex-col gap-5">
              <a href="#"
                class="card flex items-center gap-4 px-4 py-4 no-underline hover:shadow-lg transition-shadow duration-300">
                <div class="card-image-placeholder" aria-hidden="true"></div>
                <div class="flex flex-col text-sm text-[#4b3721]">
                  <strong class="font-semibold">Respiração Consciente</strong>
                  <span>Inspirar pelo nariz contando até 4, segurar o ar por 4, expirar pela boca contando até 6.</span>
                </div>
              </a>
              <a href="#"
                class="card flex items-center gap-4 px-4 py-4 no-underline hover:shadow-lg transition-shadow duration-300">
                <div class="card-image-placeholder" aria-hidden="true"></div>
                <div class="flex flex-col text-sm text-[#4b3721]">
                  <strong class="font-semibold">Atividades</strong>
                  <span>Praticar pelo menos um exercício de saúde mental por dia durante 4 semanas</span>
                </div>
              </a>
            </div>
          </article>
        </div>

        <!-- Right Column -->
        <div class="flex flex-col w-1/2 pl-10" style="gap: 3rem;">
          <!-- Diary Highlights -->
          <article class="mb-4 flex flex-col">
            <h2 class="font-semibold mb-4 text-lg" style="color:#4b3721;">Destaques dos Diário Emocional</h2>
            <div class="flex flex-col gap-4">
              <div class="card flex gap-4 p-4">
                <div class="card-image-placeholder" aria-hidden="true"></div>
                <div class="flex flex-col text-sm text-[#4b3721]">
                  <strong class="font-semibold">Alteração de Humor</strong>
                  <span>Nos últimos dias, percebi que minhas manhãs costumam ser mais calmas e produtivas, enquanto à tarde...</span>
                </div>
              </div>
              <div class="card flex gap-4 p-4">
                <div class="card-image-placeholder" aria-hidden="true"></div>
                <div class="flex flex-col text-sm text-[#4b3721]">
                  <strong class="font-semibold">Alivio</strong>
                  <span>Percebo que escrever sobre meus sentimentos me ajuda a entender melhor o que estou sentindo...</span>
                </div>
              </div>
            </div>
          </article>

          <!-- Recommendations -->
          <article>
            <h2 class="font-semibold mb-4 text-lg" style="color:#4b3721;">Recomendações feitas para você</h2>
            <div class="flex gap-6">
              <a href="comunidade_post.html"
                class="card flex flex-col p-4 gap-3 no-underline hover:shadow-lg transition-shadow duration-300 flex-1"> <img src="img/comunidade/post1.jpg" alt="">
                <div aria-hidden ="true"></div>
                <strong class="font-semibold text-sm text-[#4b3721]">A ansiedade tem solução</strong> 
                <p class="text-xs text-[#4b3721]">Crises, preocupações, e um monte de outras coisas a mais...</p>
              </a>
              <a href="comunidade_post2.html"
                class="card flex flex-col p-4 gap-3 no-underline hover:shadow-lg transition-shadow duration-300 flex-1"> <img src="img/comunidade/post2.jpg" alt="">
                <div  aria-hidden="true"></div>
                <strong class="font-semibold text-sm text-[#4b3721]">Técnicas de Redução de Estresse</strong>
                <p class="text-xs text-[#4b3721]">A saúde mental é tão importante quanto a saúde física...</p>
              </a>
            </div>
          </article>
        </div>
      </section>
    </div>
  </div>

  <script>
    (() => {
      const svg = document.getElementById('emotional-graph');
      const tooltip = document.getElementById('tooltip');
      const svgRect = svg.getBoundingClientRect();

      // Fake data points with "day" and "value" for tooltip
      const pointsData = [
        { cx: 60, cy: 100, day: "Dia 1", value: 40 },
        { cx: 140, cy: 110, day: "Dia 3", value: 45 },
        { cx: 220, cy: 70, day: "Dia 5", value: 65 },
        { cx: 300, cy: 150, day: "Dia 7", value: 15 },
        { cx: 460, cy: 80, day: "Dia 12", value: 60 },
        { cx: 540, cy: 60, day: "Dia 14", value: 70 },
        { cx: 580, cy: 120, day: "Dia 16", value: 40 },
        { cx: 620, cy: 180, day: "Dia 18", value: 0 },
        { cx: 700, cy: 90, day: "Dia 20", value: 50 },
        { cx: 740, cy: 140, day: "Dia 22", value: 30 }
      ];

      function findClosestPoint(mouseX) {
        let closest = null;
        let closestDistance = Infinity;
        for (const p of pointsData) {
          let dist = Math.abs(p.cx - mouseX);
          if (dist < closestDistance) {
            closestDistance = dist;
            closest = p;
          }
        }
        return closest;
      }

      svg.addEventListener('mousemove', e => {
        const rect = svg.getBoundingClientRect();
        const mouseX = e.clientX - rect.left;
        const mouseY = e.clientY - rect.top;

        // Clamp mouseX so tooltip does not overflow
        let clampedX = Math.min(Math.max(40, mouseX), 760);

        const closest = findClosestPoint(clampedX);

        if (closest) {
          tooltip.style.opacity = 1;
          tooltip.style.left = `${closest.cx}px`;
          tooltip.style.top = `${closest.cy}px`;
          tooltip.textContent = `${closest.day}: ${closest.value.toFixed(1)}`;
        } else {
          tooltip.style.opacity = 0;
        }
      });

      svg.addEventListener('mouseleave', () => {
        tooltip.style.opacity = 0;
      });

      // Period selector logic (just changes styling here, no data change)
      const periodSelect = document.getElementById('period-select');
      const graphFill = document.getElementById('graph-fill');
      const graphLine = document.getElementById('graph-line');

      periodSelect.addEventListener('change', () => {
        // In a real app, update the graph data based on period here.
        // For demonstration, just show tooltip reset and highlight selected option.
        tooltip.style.opacity = 0;
      });
    })();
  </script>
</body>

</html>